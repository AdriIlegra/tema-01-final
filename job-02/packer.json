{
  "variables": {
    "dockerhub_username": "",
    "dockerhub_password": ""
  },
  "builders": [
    {
      "type": "docker",
      "image": "ubuntu:20.04",
      "commit": true,
      "changes": ["EXPOSE 8090"]
    }
  ],
  "provisioners": [
    {
      "type": "ansible",
      "playbook_file": "playbook.yml"
    }
  ],
  "post-processors": [
    {
      "type": "docker-tag",
      "repository": "suaimagem/calculator-app",
      "tags": ["1.0"]
    },
    {
      "type": "docker-push",
      "login": true,
      "login_username": "{{user `dockerhub_username`}}",
      "login_password": "{{user `dockerhub_password`}}"
    }
  ]
}
